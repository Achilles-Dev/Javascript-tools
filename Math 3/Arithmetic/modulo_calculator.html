<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Modulo Calculator</title>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.6.5/dist/sweetalert2.all.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.6.5/dist/sweetalert2.min.css" rel="stylesheet">
</head>

<body>
  <div>
    <h1>Modulo Calculator</h1>
    <p>Supports real, negative, and scientific notation numbers</p>
    <p>
      <p>a mod n = ?</p>
      <label for="numA">a:</label>
      <input type="text" id="numA" placeholder="eg. 9.87e90, 9683, 76.23, -32" />  
    </p>
    <p>mod</p>
    <p>
      <label for="numN">n:</label>
      <input type="text" id="numN" placeholder="eg. 9.87e90, 9683, 76.23, -32" />  
    </p>

    <p>
      <button id="calcBtn">Calculate</button>
      <button id="resetBtn">Reset</button>
    </p>
    <hr>
    <p>
    <h3>Result:</h3>
    <h3 id="calcResults">Result will appear here...</h3>
    </p>
  </div>
  <script>

    /********************************** ELEMENTS **********************************/
    const numAEl = document.getElementById('numA');
    const numNEl = document.getElementById('numN');
    const calcBtnEl = document.getElementById('calcBtn');
    const resetBtnEl = document.getElementById('resetBtn');
    const calcResultsEl = document.getElementById('calcResults')

    /********************************** FUNCTIONS **********************************/
    // Conversion functions

    function getMod(numA, numN) {
      let newNumA = numA
      let newNmN = numN
      if (numA.includes('e')) {
        let eIndex = numA.indexOf('e')
        
        let exponent = newNumA.substr(eIndex+1, (numA.length - 1) - eIndex)
        let numPart = newNumA.substr(0, eIndex)
        newNumA = parseFloat(numPart) * 10 ** parseFloat(exponent)
      } else if (numN.includes('e')) {
        let eIndex = numN.indexOf('e')
        
        let exponent = newNumN.substr(eIndex+1, (numA.length - 1) - eIndex)
        let numPart = newNumN.substr(0, eIndex)
        newNumN = parseFloat(numPart) * 10 ** parseFloat(exponent)
      }
      let results = 0
      results = parseFloat(newNumA) % parseFloat(newNmN)
      return results
    }

    function calculateResults() {
      // Retrieve input values
      const numA = numAEl.value
      const numN = numNEl.value
      
      if (
        isNaN(numA) || isNaN(numN)
      ) {
        showError("Please Enter All Details.");
        return;
      }
      
      try {
        const mod = getMod(numA, numN)
        calcResultsEl.innerHTML = `${numA} mod ${numN} = ${mod}`
      } catch (error) {
        showError("Something Went Wrong!!!");
        resethandler()
      }
    }

    /********************************* HELPER FUNCTIONS **********************************/

    function showError(errorMessage) {
      Swal.fire({
        icon: "error",
        title: "Error",
        text: errorMessage,
      });
    }

    function resetForm() {
      numAEl.value = ""
      numNEl.value = ""
    }

    function resetResult() {
      calcResultsEl.innerHTML = "<p>Result will appear here...</p>";
    }

    function resethandler() {
      resetForm();
      resetResult();
    }

    /********************************** EVENT LISTENERS **********************************/
    resetBtnEl.addEventListener("click", resethandler);
    [numAEl, numNEl].forEach((el) => {
      el.addEventListener("input", resetResult);
    });
    calcBtnEl.addEventListener("click", calculateResults);
  </script>
</body>

</html> 